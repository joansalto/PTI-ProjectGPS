extends ./navbar

block content
    .main.container
        .row
            div.col-md-11
                h1 Raspberrys
            div.col-md-1
                br
                button.btn.btn-success(type="button", onclick="abrir();") Añadir
        .row
            br
            table.table.table-bordered.table-responsive.table-hover
                thead
                    .active
                        tr
                            th RaspberryID
                            th DNI
                            th(style="width:1%;text-align:center;") Opciones
                            th(style="width:1%;text-align:center;") Eliminar
                tbody
                    each item in rows
                        tr
                            td= item.RaspID
                            td= item.DNI
                            td(style="text-align:center;")
                                if item.DNI == null
                                    button.btn.btn-primary.btn-xs(onclick="asociar();")
                                        span.glyphicon.glyphicon-tag(aria-hidden= 'true')
                                else
                                    button.btn.btn-warning.btn-xs(onclick="desasociar();")
                                        span.glyphicon.glyphicon-fire(aria-hidden= 'true')
                            td(style="text-align:center;")
                                button.btn.btn-danger.btn-xs(onclick="eliminar();")
                                    span.glyphicon.glyphicon-remove(aria-hidden= 'true')

    div.modal.fade(id="desasociar" role="dialog")
        .modal-dialog
            .modal-content
                .modal-header
                    button.close(type="button" data-dismiss="modal") &times
                    h4 Desasociar cliente
                .modal-body
                    b ¿Está seguro que quiere desasociar el cliente de esta Raspberry?
                    p Esta acción no se podrá deshacer.
                .modal-footer
                    button.btn.btn-danger(type="button" id="modalDesasociar" onclick="valida_desasociar()") Desasociar
                    button.btn.btn-default(type="button" data-toggle="modal" data-dismiss="modal") Cancelar

    div.modal.fade(id="asociar" role="dialog")
        .modal-dialog
            .modal-content
                .modal-header
                    button.close(type="button" data-dismiss="modal") &times
                    h4 Asociar cliente
                .modal-body
                    form(method="post" id="formasociar" action="../client/asociar_cliente")
                        .row
                            div.dropdown.col-md-6
                                label(for="DNI") DNI
                                input.form-control(name="dni", id="DNI", required="required")
                                div.alert.alert-danger(style="display:none" id="error_dni")

                .modal-footer
                    button.btn.btn-danger(type="button" id="modalAsociar" onclick="valida_asociar()") Asociar
                    button.btn.btn-default(type="button" data-toggle="modal" data-dismiss="modal") Cancelar
    script.
        function desasociar() {
            $('#desasociar').modal('show');
        }
        function asociar() {
            $('#asociar').modal('show');
        }
